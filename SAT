#!/bin/bash

# Automatically add the script's directory to PATH if not already in it
if [[ ":$PATH:" != *":$(dirname "$0"):"* ]]; then
    export PATH=$PATH:$(dirname "$0")
fi

# Define the paths for rules and puzzles
RULES_FILE="rules/sudoku-rules-9x9.txt"
# PUZZLES_DIR="puzzles"

# Validate the number of arguments
if [[ "$#" -lt 2 ]]; then
    echo "Usage: SAT -S[1|2|3] puzzle_file"
    exit 1
fi

# Extract the strategy and puzzle file arguments
STRATEGY=$1
PUZZLE_FILE=$2

# Validate the rules file and puzzle file
if [[ ! -f "$RULES_FILE" ]]; then
    echo "Error: Rules file not found at $RULES_FILE."
    exit 1
fi

if [[ ! -f "$PUZZLE_FILE" ]]; then
    echo "Error: Puzzle file not found in $PUZZLES_DIR/$PUZZLE_FILE."
    exit 1
fi

# Map strategies to Python scripts
case $STRATEGY in
    -S1)
        SCRIPT="app.py"
        ;;
    -S2)
        SCRIPT="mom_heuristic.py"
        ;;
    -S3)
        SCRIPT="jeroslow_wang_heuristic.py"
        ;;
    *)
        echo "Error: Invalid strategy. Use -S1, -S2, or -S3."
        exit 1
        ;;
esac

# Run the selected Python script with the rules and puzzle file as arguments
python3 ./$SCRIPT "$RULES_FILE" "$PUZZLES_DIR/$PUZZLE_FILE"
